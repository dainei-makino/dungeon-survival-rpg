# 現状の仕様

## プロジェクト構成
- **Vite** を使用してビルド・開発を行うシンプルなフロントエンドプロジェクト。
- `src/html/index.html` をエントリーポイントとして、タブ切り替え型のシングルページアプリを構成。
- タブは「トップ」「小説」「ゲーム」の3種で、`src/tabs/main.ts` で動的にモジュールをロード。
- ゲームは `src/games/dungeon-rpg` 以下に実装されており、Phaser 3 を用いた疑似3D表現のダンジョンRPGが動作する。

## ゲームの主な仕様
- マップ生成は `DungeonMap` クラスで自動生成。部屋と通路をランダムに掘り、開始位置を決定。
- プレイヤー(`Player`) は座標と向きを持ち、`Hero` クラスでHPや攻撃力を管理。
- キーボード操作
  - **W/S**: 前進・後退
  - **A/D**: 左右回転
  - **J/K**: 左右へ平行移動
- 画面はレイキャスティングによる擬似3D表示で、画面内に腕画像を重ねて一人称視点を演出。
- `DungeonView` が描画・入力処理・ミニマップ表示などを担当。

## その他
- テストやCIは現状無し。
- npmスクリプトは `build` と `preview` のみ。
- 依存ライブラリは `vite` と `three`。

# Three.js への段階的移行計画
1. **準備段階**
   - Three.js を依存関係に追加し、簡単な WebGL 描画ができる環境を整える。
   - Phaser との共存を考慮し、現行ゲームと並行して Three.js のテストコードを追加。
2. **表示基盤の置き換え**
   - `DungeonView` 相当のクラスを Three.js で再実装。床・壁・天井をボックスやプレーンで描画し、カメラ操作で一人称視点にする。
   - 既存の `DungeonMap` ロジックやプレイヤー制御(`Player`、`Hero`)はできるだけ流用する。
3. **操作系の統合**
   - キーボード入力処理を Three.js 側で実装し、現在の移動・回転・平行移動操作を再現する。
   - MiniMap 表示は Canvas2D など別レイヤーで表示してもよい。
4. **アセットやエフェクトの拡充**
   - 現在は壁を単色で描画しているが、テクスチャ貼り付けに対応させる。
   - アニメーション用の3Dモデルやパーティクルエフェクトなどを段階的に導入。
5. **最終移行とクリーンアップ**
   - 十分に Three.js 版が動作したため Phaser 依存を削除し、旧コードを整理した。
   - ビルド設定やドキュメントも更新し、Three.js ベースのプロジェクトとして完成させた。


